<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>LM Config Reloader (Optional) - LM-K8s-Webhook</title>
    <meta name="generator" content="Hugo 0.90.1" />

    
    <meta name="description" content="Kubernetes Mutating Admission Webhook">
    
    <link rel="canonical" href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/config-reloader/">
    
    <meta name="author" content="LogicMonitor, Inc.">
    

    <meta property="og:url" content="https://logicmonitor.github.io/lm-k8s-webhook/configurations/config-reloader/">
    <meta property="og:title" content="LM-K8s-Webhook">
    <meta property="og:image" content="https://logicmonitor.github.io/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="LM-K8s-Webhook">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://logicmonitor.github.io/lm-k8s-webhook/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://logicmonitor.github.io/lm-k8s-webhook/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.eot');
        src: url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.woff')
               format('woff'),
             url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.ttf')
               format('truetype'),
             url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/application.css">
    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Brandon%20Grotesque:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Brandon Grotesque', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://logicmonitor.github.io/lm-k8s-webhook/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-blue palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        LM Config Reloader (Optional)
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/LogicMonitor" title="@LogicMonitor on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/LogicMonitor" title="@LogicMonitor on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/logicmonitor/lm-k8s-webhook" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://logicmonitor.github.io/lm-k8s-webhook/images/logo.png">
        </div>
      
      <div class="name">
        <strong>LM-K8s-Webhook <span class="version">1.0.0</span></strong>
        
          <br>
          logicmonitor/lm-k8s-webhook
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/logicmonitor/lm-k8s-webhook/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/logicmonitor/lm-k8s-webhook/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="https://logicmonitor.github.io/lm-k8s-webhook/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Prerequisites" href="https://logicmonitor.github.io/lm-k8s-webhook/prerequisites">
	
	Prerequisites
</a>



  
</li>



<li>
  
    



<a  title="Deployment" href="https://logicmonitor.github.io/lm-k8s-webhook/deployment">
	
	Deployment
</a>



  
</li>



<li>
  
    <span class="section">Configurations</span>
    <ul>
      
        
        



<a  title="Selectors" href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/selectors/">
	
	Selectors
</a>



      
        
        



<a  title="Additional attributes config (Optional)" href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/additional-attributes-config/">
	
	Additional attributes config (Optional)
</a>



      
        
        



<a  title="LM Config Reloader (Optional)" href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/config-reloader/">
	
	LM Config Reloader (Optional)
</a>



      
        
        



<a  title="Helm chart configurations" href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/configuration/">
	
	Helm chart configurations
</a>



      
    </ul>
  
</li>



<li>
  
    



<a  title="Examples" href="https://logicmonitor.github.io/lm-k8s-webhook/examples">
	
	Examples
</a>



  
</li>



<li>
  
    



<a  title="FAQ&#39;s" href="https://logicmonitor.github.io/lm-k8s-webhook/faq">
	
	FAQ&#39;s
</a>



  
</li>



<li>
  
    



<a  title="Troubleshooting guide" href="https://logicmonitor.github.io/lm-k8s-webhook/troubleshooting-guide">
	
	Troubleshooting guide
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/LogicMonitor" target="_blank" title="@LogicMonitor on Twitter">
              @LogicMonitor on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/LogicMonitor" target="_blank" title="@LogicMonitor on GitHub">
              @LogicMonitor on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:lm-k8s-webhook@logicmonitor.com" title="Email of lm-k8s-webhook@logicmonitor.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>LM Config Reloader (Optional) </h1>

			<h2 id="overview">Overview</h2>
<ul>
<li>LM-K8s-Webhook uses 2 important configurations, one is <a href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/additional-attributes-config/">Additional attribute config</a> and other one is <code>lm-k8s-webhook-mutating-webhook-configuration</code> which is of kind <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#mutatingwebhookconfiguration-namespaceselector-1-0">MutatingWebhookConfiguration</a> which basically contains the information about how the mutating webhook should be configured.</li>
<li>You can have these two configuration files in your Github repo and once you update these configurations on Github, <code>lm-config-reloader</code> will fetch the updated configurations and update the configurations in the container.</li>
</ul>
<hr>
<h2 id="configurations">Configurations</h2>
<p>By default, <code>lm-config-reloader</code> is disabled. You need to follow following steps to configure <code>lm-config-reloader</code>:</p>
<ul>
<li>As a part of MutatingWebhookConfiguration i.e. <code>lm-k8s-webhook-mutating-webhook-configuration</code>, as of now you can only update the <strong>ObjectSelector</strong> and <strong>NamespaceSelector</strong> using <code>LM-K8s-Reloader</code>. You can refer to the file content that is shown below and create your own MutatingWebhookConfiguration file by replacing the ObjectSelector and NamespaceSelector with your selectors and push it to the Github repo.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">admissionregistration.k8s.io/v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">MutatingWebhookConfiguration</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">lm-k8s-webhook-mutating-webhook-configuration</span><span class="w">
</span><span class="w"></span><span class="nt">webhooks</span><span class="p">:</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">lm-k8s-webhook-svc.lm-k8s-webhook.svc.cluster.local</span><span class="w">
</span><span class="w">  </span><span class="nt">objectSelector</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">lm-k8s-webhook</span><span class="p">:</span><span class="w"> </span><span class="l">enabled</span><span class="w">
</span><span class="w">  </span><span class="nt">namespaceSelector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">matchExpressions</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">environment</span><span class="w">
</span><span class="w">      </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="l">In</span><span class="w">
</span><span class="w">      </span><span class="nt">values</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">dev</span><span class="w">
</span></code></pre></div><ul>
<li>For the <code>additional attribute config</code> file, you can refer to <a href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/additional-attributes-config/">Additional attribute config</a> section. Once config is ready, push this file to your Github repo.</li>
<li>Get the <code>lm-config-reloader</code> configuration file from <a href="https://github.com/logicmonitor/lm-k8s-webhook/blob/main/lm-config-reloader/reloader-config.yaml">here</a> and update this config file to include the details of your Github repo where configurations are placed.</li>
<li>You need to pass this config file while deploying the LM-K8s-Webhook. You can refer to the example 6 from <a href="https://logicmonitor.github.io/lm-k8s-webhook/examples/">example</a> section.</li>
</ul>
<hr>

		
			<aside class="copyright" role="note">
				
				&copy; 2022 Released under Mozilla Public License 2.0 &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://logicmonitor.github.io/lm-k8s-webhook/prerequisites/" title="Prerequisites">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Prerequisites
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://logicmonitor.github.io/lm-k8s-webhook/configurations/configuration/" title="Helm chart configurations">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Helm chart configurations
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/logicmonitor.github.io\/lm-k8s-webhook';
      var repo_id  = 'logicmonitor\/lm-k8s-webhook';
    
    </script>

    <script src="https://logicmonitor.github.io/lm-k8s-webhook/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

