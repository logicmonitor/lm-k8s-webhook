<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>External config - LM-K8s-Webhook</title>
    <meta name="generator" content="Hugo 0.90.1" />

    
    <meta name="description" content="Kubernetes Mutating Admission Webhook">
    
    <link rel="canonical" href="https://logicmonitor.github.io/lm-k8s-webhook/docs/external-config/">
    
    <meta name="author" content="LogicMonitor, Inc.">
    

    <meta property="og:url" content="https://logicmonitor.github.io/lm-k8s-webhook/docs/external-config/">
    <meta property="og:title" content="LM-K8s-Webhook">
    <meta property="og:image" content="https://logicmonitor.github.io/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="LM-K8s-Webhook">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://logicmonitor.github.io/lm-k8s-webhook/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://logicmonitor.github.io/lm-k8s-webhook/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.eot');
        src: url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.woff')
               format('woff'),
             url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.ttf')
               format('truetype'),
             url('https://logicmonitor.github.io/lm-k8s-webhook/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/application.css">
    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://logicmonitor.github.io/lm-k8s-webhook/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Brandon%20Grotesque:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Brandon Grotesque', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://logicmonitor.github.io/lm-k8s-webhook/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-blue palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        External config
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/LogicMonitor" title="@LogicMonitor on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/LogicMonitor" title="@LogicMonitor on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/logicmonitor/lm-k8s-webhook" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://logicmonitor.github.io/lm-k8s-webhook/images/logo.png">
        </div>
      
      <div class="name">
        <strong>LM-K8s-Webhook <span class="version">1.0.0</span></strong>
        
          <br>
          logicmonitor/lm-k8s-webhook
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/logicmonitor/lm-k8s-webhook/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/logicmonitor/lm-k8s-webhook/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="LM-K8s-Webhook" href="https://logicmonitor.github.io/lm-k8s-webhook/">
	
	LM-K8s-Webhook
</a>



  
</li>



<li>
  
    



<a  title="Getting started" href="https://logicmonitor.github.io/lm-k8s-webhook/getting-started">
	
	Getting started
</a>



  
</li>



<li>
  
    <span class="section">Docs</span>
    <ul>
      
        
        



<a  title="Selectors" href="https://logicmonitor.github.io/lm-k8s-webhook/docs/selectors/">
	
	Selectors
</a>



      
        
        



<a  title="External config" href="https://logicmonitor.github.io/lm-k8s-webhook/docs/external-config/">
	
	External config
</a>



      
        
        



<a  title="Hot-reload" href="https://logicmonitor.github.io/lm-k8s-webhook/docs/hot-reload/">
	
	Hot-reload
</a>



      
        
        



<a  title="Configuration" href="https://logicmonitor.github.io/lm-k8s-webhook/docs/configuration/">
	
	Configuration
</a>



      
        
        



<a  title="Examples" href="https://logicmonitor.github.io/lm-k8s-webhook/docs/examples/">
	
	Examples
</a>



      
    </ul>
  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/LogicMonitor" target="_blank" title="@LogicMonitor on Twitter">
              @LogicMonitor on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/LogicMonitor" target="_blank" title="@LogicMonitor on GitHub">
              @LogicMonitor on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:lm-k8s-webhook@logicmonitor.com" title="Email of lm-k8s-webhook@logicmonitor.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>External config </h1>

			<p>Currently as a part of the external config, user can define the custom environment variables that are to be injected into the application pods.</p>
<p>You can download the sample external config file from here: <a href="https://github.com/logicmonitor/lm-k8s-webhook/blob/main/sampleconfig.yaml">https://github.com/logicmonitor/lm-k8s-webhook/blob/main/sampleconfig.yaml</a></p>
<p><strong>Example:</strong></p>
<pre tabindex="0"><code>lmEnvVars:
  resource:
    - env: 
        name: SERVICE_ACCOUNT_NAME
        valueFrom:
          fieldRef:
            fieldPath: spec.serviceAccountName
      resAttrName: serviceaccount.name
      overrideDisabled: true
    - env:
        name: SERVICE_NAMESPACE
        valueFrom:
          fieldRef:
            fieldPath: metadata.labels['app-namespace']
    - env:
        name: SERVICE_NAME
        valueFrom:
          fieldRef:
            fieldPath: metadata.labels['app-name']
  operation:
    - env:
        name: COMPANY_NAME
        value: ABC Corporation
      overrideDisabled: true 
    - env:
        name: OTLP_ENDPOINT
        value: lmotel-svc:4317
      overrideDisabled: true 
    - env:
        name: OTEL_JAVAAGENT_ENABLED
        value: true
      overrideDisabled: true
    - env:
        name: DEPLOYMENT_ENV
        value: production
</code></pre><p>environment variables can be of two types, i.e. <code>resource</code> and <code>operation</code></p>
<ul>
<li><code>Resource</code> holds the resource environment variables, which will be the part of <em>OTEL_RESOURCE_ATTRIBUTES</em>.</li>
<li><code>Operation</code> holds the operation environment variables, which will not be the part of <em>OTEL_RESOURCE_ATTRIBUTES</em> but can be used in the application for custom use cases.</li>
<li><code>resAttrName</code> field can be used only in resource section. The value assigned to resAttrName will be used as a name of the resource attribute instead of the actual env variable name while passing it through the <em>OTEL_RESOURCE_ATTRIBUTES</em>.</li>
<li><code>overrideDisabled</code> field can be used in both, resource as well as operation sections. It decides if the value of the env variable which is defined in external config is allowed to be overriden by the same name env variable from the container definition. Default value of this field is false, which means that overriding of the value of the env variable defined in external config is allowed.</li>
</ul>
<ul>
<li>LM-Webhook injects following environment variables in the application pods.</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:right">SR. No.</th>
<th style="text-align:left">Environment Variable Name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">LM_APM_CLUSTER_NAME</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">LM_APM_NODE_NAME</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">LM_APM_POD_NAME</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">LM_APM_POD_IP</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">LM_APM_POD_NAMESPACE</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">LM_APM_POD_UID</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">SERVICE_NAMESPACE</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left">SERVICE_NAME</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:left">OTEL_RESOURCE_ATTRIBUTES</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>It is not recommanded to explicitely specify these environment variables except <code>SERVICE_NAMESPACE</code> &amp; <code>OTEL_RESOURCE_ATTRIBUTES</code> as a part of pod definition.
Default value of <code>SERVICE_NAMESPACE</code> is the value of the pod namespace, which can be overriden, either by specifying it as a part of pod definition (if overriding is allowed) or in the external configuration.</p>
</li>
<li>
<p>You can pass the resource attributes which are not getting set by the lm-webhook by defining the <code>OTEL_RESOURCE_ATTRIBUTES</code> env variable in the pod definition, which will get merged with the ones which are defined by lm-webhook.</p>
</li>
<li>
<p>Values for <code>SERVICE_NAME</code> and <code>SERVICE_NAMESPACE</code> can also be specified in terms of pod label as shown in above example config. So that value of the specified pod label can be used as a <code>SERVICE_NAME</code> or <code>SERVICE_NAMESPACE</code>.</p>
</li>
</ul>

		
			<aside class="copyright" role="note">
				
				&copy; 2021 Released under Mozilla Public License 2.0 &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://logicmonitor.github.io/lm-k8s-webhook/getting-started/" title="Getting Started">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Getting Started
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://logicmonitor.github.io/lm-k8s-webhook/docs/examples/" title="Examples">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Examples
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/logicmonitor.github.io\/lm-k8s-webhook';
      var repo_id  = 'logicmonitor\/lm-k8s-webhook';
    
    </script>

    <script src="https://logicmonitor.github.io/lm-k8s-webhook/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

